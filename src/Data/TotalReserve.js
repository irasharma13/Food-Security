
import React, { useEffect, useState } from "react";
import { Chart } from "react-google-charts";
import { useSelector } from "react-redux";

export const data = [
  ["Year", "India", "China", "US"],
  [1960,0,0,0],
  [1961,0,0,0],
  [1962,0,0,0],
  [1963,0,0,0],
  [1964,0,0,0],
  [1965,0,0,0],
  [1966,0,0,0],
  [1967,0,0,0],
  [1968,0,0,0],
  [1969,0,0,0],
  [1970,0,0,0],
  [1971,13.3546609007128,0,0],
  [1972,13.6361027084753,0,0],
  [1973,14.8580826947513,0,0],
  [1974,18.3087258224956,0,0],
  [1975,14.888831931646,0,0],
  [1976,25.5632172484829,0,0],
  [1977,39.4782682776715,0,0],
  [1978,50.3389249125613,0,0],
  [1979,64.9541726945825,0,0],
  [1980,57.9529008030199,0,0],
  [1981,36.0712230552189,174.30692170964,0],
  [1982,30.5890373518057,205.162267972859,0],
  [1983,26.8054435519184,206.328840704897,0],
  [1984,26.0528462937761,176.040677769512,0],
  [1985,24.3820432247951,101.08886065368,0],
  [1986,23.3360780230479,69.2154412790343,0],
  [1987,21.5475206419755,63.5351375936359,0],
  [1988,15.4934589336195,55.9662988208573,0],
  [1989,10.9174439093907,51.3049176967183,0],
  [1990,6.75373608549618,62.3413783151308,0],
  [1991,8.97557783016512,79.9297533528531,0],
  [1992,10.867260825399,34.2611184412349,0],
  [1993,16.0676385248745,31.7658609678923,0],
  [1994,24.7408254960678,57.3982850273413,0],
  [1995,24.3736131718362,67.8599791892689,0],
  [1996,26.4876066129941,86.5866890253679,0],
  [1997,30.1781699926886,99.6891756523615,0],
  [1998,31.1658971217028,105.983119794166,0],
  [1999,36.0848593077683,108.458543224852,0],
  [2000,40.5996797790178,117.721046974955,0],
  [2001,49.2972814106673,119.391393823767,0],
  [2002,67.7196714862146,160.536099662391,0],
  [2003,87.2587269811448,200.887343913492,0],
  [2004,106.459372005668,251.839641153722,0],
  [2005,113.721097540285,290.848050701713,0],
  [2006,111.612105248727,331.094072844704,0],
  [2007,135.539270475798,409.362840457539,0],
  [2008,113.346273242114,508.778446517509,0],
  [2009,111.068783299851,539.696971805164,0],
  [2010,103.461319152171,392.293617225978,0],
  [2011,89.3361512583746,308.731219860373,0],
  [2012,76.5267053788125,295.03728433131,0],
  [2013,69.7708394619796,262.102630204063,0],
  [2014,71.0548132506625,219.302852538992,0],
  [2015,73.7886763078258,255.31058222747,0],
  [2016,79.4056338085916,219.085442069193,0],
  [2017,80.6717304828363,189.821269758469,0],
  [2018,76.6111171712869,161.514934701142,0],
  [2019,82.6340168100254,152.443123731408,0],
  [2020,104.455278830292,144.288771378992,0],
  [2021,104.180185001174,126.842753605614,0],
  [2022,0,0,0],  
];

export function TotalReserve(props) {
  const [chartData, setchartData] = useState([]);
  const range = useSelector((state) => state.countryRange.range);
  const country = useSelector((state) => state.countryRange.country);
  const filterData = () => {
    let filteredData = [["year", country]];
    let col = 0;
    if (country == "USA") {
      col = 3;
    } else if (country == "INDIA") {
      col = 1;
    } else if (country == "China") {
      col = 2;
    } else {
      setchartData(data);
      return;
    }
    let startYear = range[0];
    let endYear = range[1];
    for (let i = 1; i < data.length; i++) {
      let currYear = data[i][0];
      if (currYear <= endYear && currYear >= startYear) {
        filteredData.push([currYear, data[i][col]]);
      }
    }
    setchartData(filteredData);
  };

  useEffect(() => {
    console.log(range, country);
    filterData();
  }, [range, country]);

  return (
    <div style={{ marginBottom: "20px" }}>
      <Chart
        chartType="LineChart"
        width="100%"
        height="250px"
        data={chartData}
        options={{
          hAxis: {
            format: "#", // Use 'decimal' format to display integers without commas
          },
        }}
      />
    </div>
  );
}
