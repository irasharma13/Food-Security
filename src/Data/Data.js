import React, { useEffect, useState } from "react";
import { Chart } from "react-google-charts";
import { useSelector } from "react-redux";

export const data = [
  ["Year", "India", "China", "US"],
  [1960, 3.722742533, -27.27, 2.3],
  [1961, 2.931127737, -5.57999999, 6.1],
  [1962, 5.994353261, 10.3, 4.4],
  [1963, 7.452950122, 18.17999999, 5.8],
  [1964, -2.63577011, 16.95, 6.4],
  [1965, -0.05532877, 10.65, 6.5],
  [1966, 7.82596303, -5.770000004, 2.5],
  [1967, 3.387929176, -4.099999992, 4.8],
  [1968, 6.539700296, 16.94, 3.1],
  [1969, 5.157229736, 19.3, -0.346648734],
  [1970, 1.642930384, 7.060000003, 3.293351653],
  [1971, -0.553301312, 3.809999998, 5.258907331],
  [1972, 3.295521135, 7.760000002, 5.645722571],
  [1973, 1.18533626, 2.31, -0.540551663],
  [1974, 9.149912015, 8.72, -0.205456064],
  [1975, 1.663103637, -1.570000003, 5.388139293],
  [1976, 7.254764586, 7.569999999, 4.624153064],
  [1977, 5.712532089, 11.32597799, 5.53530496],
  [1978, -5.238182703, 7.59132468, 3.166145311],
  [1979, 6.735821528, 7.834145016, -0.256749677],
  [1980, 6.006203624, 5.112761091, 2.537719298],
  [1981, 3.47573324, 9.017113914, -1.802887407],
  [1982, 7.288892901, 10.77020251, 4.583913364],
  [1983, 3.820737856, 15.19154002, 7.236633158],
  [1984, 5.254299223, 13.43067752, 4.169656215],
  [1985, 4.77656417, 8.949961764, 3.462645977],
  [1986, 3.965355634, 11.65742779, 3.459251985],
  [1987, 9.62778292, 11.22259498, 4.177061284],
  [1988, 5.947343328, 4.206334355, 3.672648159],
  [1989, 5.533454563, 3.920251368, 1.885964958],
  [1990, 1.056831433, 9.262786084, -0.108264787],
  [1991, 5.482396022, 14.22452959, 3.522440523],
  [1992, 4.75077622, 13.8837293, 2.751781042],
  [1993, 6.658924067, 13.03680663, 4.028793263],
  [1994, 7.57449184, 10.95395434, 2.684217275],
  [1995, 7.549522249, 9.922556752, 3.772565502],
  [1996, 4.049820849, 9.236779892, 4.381775174],
  [1997, 6.184415821, 7.845951788, 4.481407561],
  [1998, 8.845755561, 7.661651501, 4.753235983],
  [1999, 3.840991157, 8.490093406, 4.127484017],
  [2000, 4.823966264, 8.335733478, 0.998340792],
  [2001, 3.803975321, 9.13363079, 1.741695251],
  [2002, 7.860381476, 10.03803048, 2.861210768],
  [2003, 7.922936613, 10.11362138, 3.798891125],
  [2004, 7.923430621, 11.39459181, 3.513213799],
  [2005, 8.060732573, 12.72095567, 2.854972294],
  [2006, 7.660815065, 14.23086093, 1.876171454],
  [2007, 3.08669806, 9.65067892, -0.136579803],
  [2008, 7.861888833, 9.398725632, -2.536757067],
  [2009, 8.497584702, 10.63587106, 2.56376656],
  [2010, 5.241315001, 9.550832179, 1.550835505],
  [2011, 5.456388753, 7.863736449, 2.249545852],
  [2012, 6.386106401, 7.766150098, 1.842081071],
  [2013, 7.410227605, 7.425763656, 2.525973446],
  [2014, 7.996253786, 7.041328879, 3.07551465],
  [2015, 8.256305502, 6.848762205, 1.711426774],
  [2016, 6.795383419, 6.947200793, 2.332679395],
  [2017, 6.532989011, 6.749773832, 2.996464352],
  [2018, 4.041554187, 5.949714233, 2.161176515],
  [2019, -7.964610411, 2.3, -3.486140408],
  [2020, 0, 0, 0],
];
export function DataChart(props) {
  const [chartData, setchartData] = useState([]);
  const range = useSelector((state) => state.countryRange.range);
  const country = useSelector((state) => state.countryRange.country);
  const filterData = () => {
    let filteredData = [["year", country]];
    let col = 0;
    if (country == "USA") {
      col = 3;
    } else if (country == "INDIA") {
      col = 1;
    } else if (country == "China") {
      col = 2;
    } else {
      setchartData(data);
      return;
    }
    let startYear = range[0];
    let endYear = range[1];
    for (let i = 1; i < data.length; i++) {
      let currYear = data[i][0];
      if (currYear <= endYear && currYear >= startYear) {
        filteredData.push([currYear, data[i][col]]);
      }
    }
    setchartData(filteredData);
  };

  useEffect(() => {
    console.log(range, country);
    filterData();
  }, [range, country]);

  return (
    <div style={{ marginBottom: "20px" }}>
      <Chart
        chartType="LineChart"
        width="100%"
        height="250px"
        data={chartData}
        options={{
          hAxis: {
            format: "#", // Use 'decimal' format to display integers without commas
          },
        }}
      />
    </div>
  );
}
