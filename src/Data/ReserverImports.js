
import React, { useEffect, useState } from "react";
import { Chart } from "react-google-charts";
import { useSelector } from "react-redux";

export const data = [
  ["Year", "India", "China", "US"],
  [1960,0,0,0],
  [1961,0,0,0],
  [1962,0,0,0],
  [1963,0,0,0],
  [1964,0,0,0],
  [1965,0,0,0],
  [1966,0,0,0],
  [1967,0,0,0],
  [1968,0,0,0],
  [1969,0,0,0],
  [1970,0,0,3.06878465256798],
  [1971,0,0,2.69819403756047],
  [1972,0,0,3.13704325572387],
  [1973,0,0,4.10435424650425],
  [1974,0,0,4.85793321164003],
  [1975,3.87405485463058,0,3.89280379667813],
  [1976,7.31278322210153,0,3.26200652316508],
  [1977,10.39104209832,0,3.29793754180922],
  [1978,10.5609207971402,0,3.6257051487683],
  [1979,11.4128967757818,0,6.1033444059575],
  [1980,8.25835240427036,0,6.1616545091386],
  [1981,5.43298795763896,0,4.08221840248436],
  [1982,5.43167189869752,10.5326240049283,4.83733304803977],
  [1983,5.31354411041866,11.3291646829965,3.91236503174438],
  [1984,5.38431568252224,9.41101580026203,2.65356180238078],
  [1985,5.60318320620935,4.90478599202417,2.92483445465779],
  [1986,5.92852435619763,5.17138676410905,3.16628101944666],
  [1987,5.78103245603521,6.72397003156083,3.26503598836953],
  [1988,3.99047331574287,5.52339377679073,2.6062331938462],
  [1989,3.15360768923915,5.08372316234093,2.80318917307075],
  [1990,2.0364027734552,8.50061506335467,2.73557589265656],
  [1991,2.92296631274636,10.1087909129257,2.60169338107099],
  [1992,3.37116986123404,3.76716826644376,2.31231476555185],
  [1993,5.07094897356214,3.15485276716324,2.39765174502403],
  [1994,6.8805542264174,5.8589383126685,2.06391324712795],
  [1995,5.13385971679427,6.32825586255357,1.95523553618241],
  [1996,5.00904589274725,7.71067045739524,1.66275864603053],
  [1997,5.39180134948692,15.3584570935982,1.2572687990174],
  [1998,5.67437685311531,15.3155648378232,1.29127119690474],
  [1999,6.31148133710289,13.6364945397097,1.07377331452326],
  [2000,6.12147979448929,10.941358639692,0.854272096906953],
  [2001,7.45295243694093,12.6317565159013,0.938134144021971],
  [2002,10.3730834871592,15.2992330754394,1.11647810305723],
  [2003,12.2832820147208,11.442740318432,1.19878399570069],
  [2004,11.3051095119993,12.9044006224391,1.05559111218244],
  [2005,8.51847317184614,14.1697653869492,0.903588941772187],
  [2006,8.91992866511893,15.3932049867437,0.920734980795975],
  [2007,11.1391919314526,18.0957914112379,1.06599499526028],
  [2008,7.7142526569414,19.1459316518489,1.07901356702484],
  [2009,9.7737111431445,25.3897624622569,1.92028077353965],
  [2010,7.76063411026839,21.8294857327459,2.00331890203891],
  [2011,6.18879010347658,19.1307572380526,1.96135892377522],
  [2012,5.90371509588661,19.0830480218235,2.04662420386995],
  [2013,6.02774649537524,19.5432820448992,1.59421468829977],
  [2014,6.59913308020171,18.9654201864734,1.48004639876335],
  [2015,8.00309182929652,17.9357848551809,1.34985594012155],
  [2016,8.43013905768235,16.7160982737837,1.44075451131827],
  [2017,8.16271866943629,15.4175323187252,1.48411996805483],
  [2018,6.90105548512365,13.1417391678264,1.36035070682106],
  [2019,8.27365940048396,13.754177548943,1.55103935340287],
  [2020,12.9323281065785,14.6817028192023,2.10042590607235],
  [2021,9.84238574452328,11.6019861902875,1.98201645556126],
  [2022,7.00951210544359,11.2625955806057,1.68283915733651],    
];

export function ReserverImports(props) {
  const [chartData, setchartData] = useState([]);
  const range = useSelector((state) => state.countryRange.range);
  const country = useSelector((state) => state.countryRange.country);
  const filterData = () => {
    let filteredData = [["year", country]];
    let col = 0;
    if (country == "USA") {
      col = 3;
    } else if (country == "INDIA") {
      col = 1;
    } else if (country == "China") {
      col = 2;
    } else {
      setchartData(data);
      return;
    }
    let startYear = range[0];
    let endYear = range[1];
    for (let i = 1; i < data.length; i++) {
      let currYear = data[i][0];
      if (currYear <= endYear && currYear >= startYear) {
        filteredData.push([currYear, data[i][col]]);
      }
    }
    setchartData(filteredData);
  };

  useEffect(() => {
    console.log(range, country);
    filterData();
  }, [range, country]);

  return (
    <div style={{ marginBottom: "20px" }}>
      <Chart
        chartType="LineChart"
        width="100%"
        height="250px"
        data={chartData}
        options={{
          hAxis: {
            format: "#", // Use 'decimal' format to display integers without commas
          },
        }}
      />
    </div>
  );
}
