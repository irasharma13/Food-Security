import React, { useEffect, useState } from "react";
import { Chart } from "react-google-charts";
import { useSelector } from "react-redux";

export const data = [
  ["Year", "China", "India", "USA"],
  [1960.0, 0, 0, 0],
  [1961.0, 0, 0, 0],
  [1962.0, 0, 0, 0],
  [1963.0, 0, 0, 0],
  [1964.0, 0, 0, 0],
  [1965.0, 0, 0, 0],
  [1966.0, 0, 0, 0],
  [1967.0, 0, 0, 0],
  [1968.0, 0, 0, 0],
  [1969.0, 0, 0, 0.244106278],
  [1970.0, 0, 0, -0.084131004],
  [1971.0, 0, 0, -0.411223429],
  [1972.0, 0, 0, 0.531789507],
  [1973.0, 0, 0, 0.110015059],
  [1974.0, 0, -0.149804626, 1.061188056],
  [1975.0, 0, 1.537101815, 0.204973599],
  [1976.0, 0, 1.744416029, -0.725324787],
  [1977.0, 0, 0.504279978, -0.669629473],
  [1978.0, 0, 0.03290178, -0.005964223],
  [1979.0, 0, -0.958069194, 0.074440723],
  [1980.0, 0, -1.394554633, 0.149982492],
  [1981.0, 2.766594326, -1.257276246, -0.347121185],
  [1982.0, 1.837990284, -0.887437672, -1.216883258],
  [1983.0, 0.780929889, -1.089314216, -2.452141897],
  [1984.0, -3.688995684, -1.780805001, -2.868301506],
  [1985.0, -2.338756628, -1.834520559, -3.213665031],
  [1986.0, 0.109900989, -1.853242437, -3.308751518],
  [1987.0, -1.217210117, -2.408461745, -2.315658087],
  [1988.0, -1.241344621, -2.301281981, -1.763796667],
  [1989.0, 3.324577232, -2.191935869, -1.323999555],
  [1990.0, 3.461899766, -1.588911312, 0.046296529],
  [1991.0, 1.499359197, -1.556243036, -0.791448803],
  [1992.0, -2.610340324, -0.67161797, -1.23616054],
  [1993.0, 1.224118024, -0.51219266, -1.669252924],
  [1994.0, 0.220324638, -1.544131627, -1.486449358],
  [1995.0, 0.838556009, -1.515954247, -1.544967362],
  [1996.0, 3.843890189, -0.713014, -1.640613309],
  [1997.0, 3.058375308, -1.63832471, -2.372738757],
  [1998.0, 1.930077947, -0.703548206, -2.976139485],
  [1999.0, 1.693848601, -0.982343806, -3.920351703],
  [2000.0, 1.299167957, 0.290494936, -3.724113129],
  [2001.0, 2.408758466, 1.370941111, -4.170551601],
  [2002.0, 2.593019028, 1.443561063, -4.55826395],
  [2003.0, 3.525766041, 0.110018664, -5.206329634],
  [2004.0, 5.79092165, -1.253507315, -5.747109583],
  [2005.0, 8.424125738, -0.988988303, -5.911436634],
  [2006.0, 9.947847388, -0.663718193, -5.096603956],
  [2007.0, 9.154122986, -2.583376538, -4.734135671],
  [2008.0, 4.768144371, -1.951464148, -2.628124854],
  [2009.0, 3.906751888, -3.253484046, -2.881540026],
  [2010.0, 1.802248021, -3.429288264, -2.929352576],
  [2011.0, 2.524448448, -5.004888982, -2.58141514],
  [2012.0, 1.54856488, -2.645666243, -2.006887259],
  [2013.0, 2.253281048, -1.33950833, -2.098525502],
  [2014.0, 2.649016055, -1.067549349, -2.233519502],
  [2015.0, 1.703305668, -0.527880354, -2.106510566],
  [2016.0, 1.532655174, -1.439488918, -1.869013913],
  [2017.0, 0.173668413, -2.428608822, -2.181753513],
  [2018.0, 0.720660551, -1.036851495, -2.240577453],
  [2019.0, 1.860934648, 1.25837087, -3.091323329],
  [2020.0, 0, 0, 0],
];
export function CurrentACBal(props) {
  const [chartData, setchartData] = useState([]);
  const range = useSelector((state) => state.countryRange.range);
  const country = useSelector((state) => state.countryRange.country);
  const filterData = () => {
    let filteredData = [["year", country]];
    let col = 0;
    if (country == "USA") {
      col = 3;
    } else if (country == "INDIA") {
      col = 1;
    } else if (country == "China") {
      col = 2;
    } else {
      setchartData(data);
      return;
    }
    let startYear = range[0];
    let endYear = range[1];
    for (let i = 1; i < data.length; i++) {
      let currYear = data[i][0];
      if (currYear <= endYear && currYear >= startYear) {
        filteredData.push([currYear, data[i][col]]);
      }
    }
    setchartData(filteredData);
  };

  useEffect(() => {
    console.log(range, country);
    filterData();
  }, [range, country]);

  return (
    <div style={{ marginBottom: "20px" }}>
      <Chart
        chartType="LineChart"
        width="100%"
        height="250px"
        data={chartData}
        options={{
          hAxis: {
            format: "#", // Use 'decimal' format to display integers without commas
          },
        }}
      />
    </div>
  );
}
