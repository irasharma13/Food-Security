
import React, { useEffect, useState } from "react";
import { Chart } from "react-google-charts";
import { useSelector } from "react-redux";

export const data = [
  ["Year", "India", "China", "US"],
  [1960,36878683695.8496,59716251765.1756,546400000000],
  [1961,39026635547.4045,50056688014.5744,566800000000],
  [1962,41934681598.1532,47209188355.5452,609200000000],
  [1963,48186723185.8557,50706616610.0732,643100000000],
  [1964,56175789592.1108,59708127657.7318,690700000000],
  [1965,59210461463.6707,70436011537.1841,749000000000],
  [1966,45536890605.7143,76720008644.9133,820100000000],
  [1967,49790942160.8479,72881367877.7484,867100000000],
  [1968,52745455824.9539,70846278963.0928,948600000000],
  [1969,58086661633.6582,79705618130.486,1026000000000],
  [1970,62043816334.2287,92602638697.4156,1074359000000],
  [1971,66960360590.3302,99800597892.565,1162926000000],
  [1972,71072538513.1814,113689285303.377,1280507000000],
  [1973,85101941339.1835,138543203562.724,1431848000000],
  [1974,99161036284.4175,144188964286.502,1553300000000],
  [1975,98178114597.7304,163429496442.805,1684554000000],
  [1976,102456488498.932,153939238114.518,1869603000000],
  [1977,121214530339.294,174935897086.309,2082670000000],
  [1978,137110195145.134,149540752829.268,2349856000000],
  [1979,153181094633.748,178280594413.043,2614202000000],
  [1980,186762452323.637,191087500000,2847055000000],
  [1981,193536169269.042,195783049099.206,3201886000000],
  [1982,200057156451.433,205361295278.626,3371448000000],
  [1983,217346725721.653,231563322095.785,3614168000000],
  [1984,210959675103.166,261221374528.571,4032292000000],
  [1985,231343831062.693,310328084153.061,4310074000000],
  [1986,247574348947.767,300735081440.58,4516535000000],
  [1987,277014075282.415,272793546177.13,4828878000000],
  [1988,293483990412.157,312230327072.016,5256093000000],
  [1989,292602581800.359,347942587323.887,5598381000000],
  [1990,316775332518.038,361822783694.073,5902290000000],
  [1991,265995400854.861,384152337595.819,6096750000000],
  [1992,283798974584.144,427130409858.713,6435469000000],
  [1993,275444137041.929,443808937179.759,6733768000000],
  [1994,323108717813.725,563285881475.055,7170251000000],
  [1995,356252286873.411,722711451314.647,7574691000000],
  [1996,389211875106.82,851312277321.562,8045907000000],
  [1997,412313854145.707,950598371769.379,8589268000000],
  [1998,417792780740.133,1012416715379.85,9135464000000],
  [1999,455259488556.383,1079540025875.19,9690388000000],
  [2000,463418960201.815,1196666270820.87,10383667000000],
  [2001,481233322101.917,1320227743063.62,10746067000000],
  [2002,511490036313.605,1455612341104.81,11052223000000],
  [2003,603192892963.386,1650062167478.62,11534846000000],
  [2004,704168745465.35,1950215198146.71,12317643000000],
  [2005,814482820622.222,2269852585336.58,13166516000000],
  [2006,932915277249.472,2746976214017.25,14066382000000],
  [2007,1211641650012.42,3558368196481.58,14550103000000],
  [2008,1191736980456.35,4622902194395.89,14718111000000],
  [2009,1333878515190.13,5093159024753.31,14426269000000],
  [2010,1657660485633.28,6061119704414.83,15172073000000],
  [2011,1807020595447.34,7481168273169.79,15849978000000],
  [2012,1806177385584.8,8512368129797.8,16675595000000],
  [2013,1833600938195.01,9492642842694.02,17188331000000],
  [2014,2015014411870.51,10488924305252.6,18043094000000],
  [2015,2079182852983.18,11008791095246.4,18660910000000],
  [2016,2247939055750.25,11177613541933.3,19020479000000],
  [2017,2622801077147.31,12294360264908.9,19885551000000],
  [2018,2673994275154.21,13833878143116.9,20937355000000],
  [2019,2808367608887.78,14239959138729.4,21764537000000],
  [2020,2635665817940.12,14570137984558.4,21472360000000],
  [2021,3087256238074.61,17658729769790.5,23617113000000],
  [2022,3317300045322.43,17770326598118.6,25838900000000],   
];

export function GNICurrent(props) {
  const [chartData, setchartData] = useState([]);
  const range = useSelector((state) => state.countryRange.range);
  const country = useSelector((state) => state.countryRange.country);
  const filterData = () => {
    let filteredData = [["year", country]];
    let col = 0;
    if (country == "USA") {
      col = 3;
    } else if (country == "INDIA") {
      col = 1;
    } else if (country == "China") {
      col = 2;
    } else {
      setchartData(data);
      return;
    }
    let startYear = range[0];
    let endYear = range[1];
    for (let i = 1; i < data.length; i++) {
      let currYear = data[i][0];
      if (currYear <= endYear && currYear >= startYear) {
        filteredData.push([currYear, data[i][col]]);
      }
    }
    setchartData(filteredData);
  };

  useEffect(() => {
    console.log(range, country);
    filterData();
  }, [range, country]);

  return (
    <div style={{ marginBottom: "20px" }}>
      <Chart
        chartType="LineChart"
        width="100%"
        height="250px"
        data={chartData}
        options={{
          hAxis: {
            format: "#", // Use 'decimal' format to display integers without commas
          },
        }}
      />
    </div>
  );
}
