
import React, { useEffect, useState } from "react";
import { Chart } from "react-google-charts";
import { useSelector } from "react-redux";

export const data = [
  ["Year", "India", "China", "US"],
  [1960,0,0,0],
  [1961,0.084207443,1.400000005,0],
  [1962,-1.989098824,4.499999996,0],
  [1963,2.339252223,11.3,0],
  [1964,9.224274695,12.90000001,0],
  [1965,-11.04219709,9.699999996,0],
  [1966,-1.422579222,7.200000006,0],
  [1967,14.87087224,1.899999995,0],
  [1968,-0.158278985,-1.599999991,0],
  [1969,6.427516143,0.799999989,0],
  [1970,7.092165395,7.700000007,0],
  [1971,-1.877366735,1.900000001,0],
  [1972,-5.018479761,-0.900000006,0],
  [1973,7.201906548,8.999999999,0],
  [1974,-1.523356925,4.099999999,0],
  [1975,12.88978365,2.000000009,0],
  [1976,-5.77818282,-1.800000006,0],
  [1977,10.03625382,-2.200000003,0],
  [1978,2.302506766,-1.113120876,0],
  [1979,-12.77469046,6.13443148,0],
  [1980,12.88822533,-1.482469645,0],
  [1981,4.601673301,6.982534407,0],
  [1982,-0.280834935,11.52882427,0],
  [1983,10.12097408,8.32589347,0],
  [1984,1.585092367,12.88061345,0],
  [1985,0.314273271,1.843879446,0],
  [1986,-0.409484449,3.318687285,0],
  [1987,-1.587796598,4.704184691,0],
  [1988,15.63964748,2.543933095,0],
  [1989,1.189154743,3.074999733,0],
  [1990,4.015095805,7.327732141,0],
  [1991,-1.952488235,2.353530192,0],
  [1992,6.651006784,4.651003019,0],
  [1993,3.322706831,4.649179411,0],
  [1994,4.715980136,3.945545735,0],
  [1995,-0.695377068,4.942642538,0],
  [1996,9.92029924,5.0398939,0],
  [1997,-2.553727839,3.436640445,0],
  [1998,6.320454459,3.432994566,2.657256505],
  [1999,2.669127344,2.731373302,12.33213547],
  [2000,-0.007618146,2.328518037,13.80658464],
  [2001,6.00708957,2.638071238,-3.776841609],
  [2002,-6.604234507,2.699946552,-6.30633842],
  [2003,9.048581158,2.37205637,9.685001826],
  [2004,0.183532765,6.105019968,4.334518021],
  [2005,4.809364049,5.073914398,12.15814168],
  [2006,2.938795485,4.755278298,-5.304684651],
  [2007,5.506476634,3.523649902,-14.41260009],
  [2008,-0.24419426,5.156004666,-0.172313356],
  [2009,-0.880233005,4.002425781,12.02950851],
  [2010,8.791758288,4.251069686,-2.669932793],
  [2011,6.397806254,4.174289253,-6.510451366],
  [2012,1.487460494,4.466541956,-3.786491961],
  [2013,5.570475656,3.807199829,16.17881002],
  [2014,-0.216448191,4.050468237,1.39813772],
  [2015,0.649599312,3.898521466,7.682638257],
  [2016,6.797558631,3.277813557,6.920067091],
  [2017,6.605921519,3.961291,-2.602345108],
  [2018,2.560951552,3.4829175,4.978755744],
  [2019,4.314766319,3.085553092,5.3839676],
  [2020,3.033525287,3,0],
];

export function ForestFish(props) {
  const [chartData, setchartData] = useState([]);
  const range = useSelector((state) => state.countryRange.range);
  const country = useSelector((state) => state.countryRange.country);
  const filterData = () => {
    let filteredData = [["year", country]];
    let col = 0;
    if (country == "USA") {
      col = 3;
    } else if (country == "INDIA") {
      col = 1;
    } else if (country == "China") {
      col = 2;
    } else {
      setchartData(data);
      return;
    }
    let startYear = range[0];
    let endYear = range[1];
    for (let i = 1; i < data.length; i++) {
      let currYear = data[i][0];
      if (currYear <= endYear && currYear >= startYear) {
        filteredData.push([currYear, data[i][col]]);
      }
    }
    setchartData(filteredData);
  };

  useEffect(() => {
    console.log(range, country);
    filterData();
  }, [range, country]);

  return (
    <div style={{ marginBottom: "20px" }}>
      <Chart
        chartType="LineChart"
        width="100%"
        height="250px"
        data={chartData}
        options={{
          hAxis: {
            format: "#", // Use 'decimal' format to display integers without commas
          },
        }}
      />
    </div>
  );
}
