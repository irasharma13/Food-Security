import React, { useEffect, useState } from "react";
import { Chart } from "react-google-charts";
import { useSelector } from "react-redux";

export const data = [
  ["Year", "China", "Egypt, Arab Rep", "India", "Saudi Arabia", "USA"],
  [1960.0, 0, 0, 0, 0, 0],
  [1961.0, 7.040823235, 96.95038015, 2.171289937, 3.50877193, 41.33427808],
  [1962.0, 9.598448109, 98.21701603, 2.885768985, 3.448275862, 46.72553669],
  [1963.0, 12.11820841, 114.4293411, 3.453991236, 3.389830508, 51.06483422],
  [1964.0, 16.32831897, 125.7927333, 4.901985647, 4.083333333, 55.0294808],
  [1965.0, 25.41529212, 130.7583269, 4.959043333, 4.366393443, 61.03819904],
  [1966.0, 36.46042686, 107.2929556, 6.939907939, 6.647580645, 69.24350582],
  [1967.0, 26.56776405, 104.2130661, 9.631993992, 1.587301587, 76.2348038],
  [1968.0, 26.68593544, 119.490882, 10.99963141, 2.403100775, 76.85677818],
  [1969.0, 34.54585231, 127.6576147, 12.3893584, 3.03030303, 76.13479994],
  [1970.0, 44.04049287, 136.8414679, 14.05455904, 3.455882353, 80.63532546],
  [1971.0, 45.83174418, 136.1608775, 16.6303613, 1.785714286, 82.87535888],
  [1972.0, 52.91116265, 153.6502752, 17.27928783, 1.733793103, 85.72313082],
  [1973.0, 65.28871192, 148.5424165, 17.62561784, 5.628, 91.54384325],
  [1974.0, 56.17380967, 158.3302549, 15.93364747, 5.131410256, 88.70377917],
  [1975.0, 70.0672898, 186.2474916, 21.58825492, 5.740740741, 95.64874292],
  [1976.0, 65.77711601, 191.4522342, 21.0839396, 4.232738095, 105.1948791],
  [1977.0, 93.75404184, 217.3857543, 26.50762994, 4.602298851, 102.81233],
  [1978.0, 111.7145473, 242.6559499, 31.43243955, 8.060893855, 104.8853249],
  [1979.0, 134.7493112, 262.2395833, 32.26120261, 11.90706522, 110.1793192],
  [1980.0, 158.1728538, 290.2449694, 33.97276088, 21.67407407, 112.8309808],
  [1981.0, 155.332192, 306.8530559, 37.34899823, 34.75206186, 106.9980337],
  [1982.0, 160.034163, 346.6097386, 35.93043627, 47.36432161, 93.24290358],
  [1983.0, 172.4491212, 347.5454136, 40.7756311, 97.79681818, 98.80413618],
  [1984.0, 174.8448721, 349.850127, 48.89070885, 111.2434043, 105.1617853],
  [1985.0, 142.9966483, 374.6203905, 52.98642534, 134.6980392, 98.55976657],
  [1986.0, 142.907111, 435.3753236, 58.85599936, 152.3962963, 93.14965483],
  [1987.0, 187.637111, 441.0402098, 51.11791918, 155.7586207, 94.8042593],
  [1988.0, 208.2530512, 433.4632035, 66.09647076, 148.5245902, 95.62842739],
  [1989.0, 206.925085, 409.5017422, 69.210771, 152.1875, 98.80015604],
  [1990.0, 219.0993003, 419.8537653, 73.52302412, 144.2477876, 100.4412823],
  [1991.0, 236.2427815, 424.9669166, 77.99931978, 141.9390891, 100.7972785],
  [1992.0, 236.3347955, 335.5059496, 74.70166435, 147.5616438, 102.8030394],
  [1993.0, 205.6421988, 377.7026046, 76.17673723, 123.9106754, 108.8855303],
  [1994.0, 237.6702677, 322.7499943, 83.45589294, 98.17289337, 108.0577016],
  [1995.0, 295.9246137, 399.858005, 85.70285527, 77.70177839, 108.7728004],
  [1996.0, 299.8866591, 427.0492831, 89.04232883, 86.94459682, 112.8720826],
  [1997.0, 297.8395236, 388.1878572, 100.1725608, 88.21104699, 113.8628603],
  [1998.0, 299.3979452, 419.2152118, 104.0679516, 90.73412153, 112.3411025],
  [1999.0, 304.4963326, 393.9545758, 112.1710203, 96.54980523, 111.8602263],
  [2000.0, 285.9447796, 449.743306, 103.7861182, 107.5167038, 108.7514593],
  [2001.0, 293.9154878, 457.304439, 108.1821987, 106.6, 110.1302646],
  [2002.0, 335.8142059, 454.359673, 100.3290553, 101.5277778, 112.5172781],
  [2003.0, 330.8037479, 477.6668961, 105.1772039, 106.1666667, 120.204496],
  [2004.0, 354.4306033, 541.2816189, 115.2715101, 114.0, 121.6080303],
  [2005.0, 376.8997004, 600.0780336, 127.614592, 95.91428571, 117.7752144],
  [2006.0, 376.7396838, 586.5642994, 136.4039215, 106.0869565, 123.438462],
  [2007.0, 387.1512987, 523.1669267, 142.8352255, 114.4805572, 123.3453228],
  [2008.0, 374.2178454, 520.2498107, 153.3493908, 69.18238994, 113.3994097],
  [2009.0, 385.4265002, 483.0790569, 167.4572959, 65.70713392, 107.7355458],
  [2010.0, 424.4187755, 473.3727811, 179.0358769, 62.89308176, 115.7948915],
  [2011.0, 440.8322592, 503.5612536, 180.7482912, 63.46945236, 128.3608613],
  [2012.0, 450.8029431, 462.990456, 163.1220216, 61.59769009, 132.6729487],
  [2013.0, 449.0524477, 500.92874, 156.4956981, 90.15645372, 134.9636578],
  [2014.0, 464.8275736, 522.5760267, 163.4980794, 79.62099125, 132.3572944],
  [2015.0, 464.6199489, 566.7723853, 171.0349325, 87.6504298, 127.7443986],
  [2016.0, 463.187015, 565.9966928, 165.89799, 89.21484038, 129.3097644],
  [2017.0, 421.4677499, 569.1232417, 170.0011508, 81.23363398, 131.9909973],
  [2018.0, 393.2154566, 569.1232417, 175.0153437, 81.23363398, 128.7651689],
  [2019.0, 0, 0, 0, 0, 0],
  [2020.0, 0, 0, 0, 0, 0],
];

export function FertilizersDataChart(props) {
  const [chartData, setchartData] = useState([]);
  const range = useSelector((state) => state.countryRange.range);
  const country = useSelector((state) => state.countryRange.country);
  const filterData = () => {
    let filteredData = [["year", country]];
    let col = 0;
    if (country == "USA") {
      col = 5;
    } else if (country == "INDIA") {
      col = 4;
    } else if (country == "China") {
      col = 1;
    } else {
      setchartData(data);
      return;
    }
    let startYear = range[0];
    let endYear = range[1];
    for (let i = 1; i < data.length; i++) {
      let currYear = data[i][0];
      if (currYear <= endYear && currYear >= startYear) {
        filteredData.push([currYear, data[i][col]]);
      }
    }
    setchartData(filteredData);
  };

  useEffect(() => {
    console.log(range, country);
    filterData();
  }, [range, country]);

  return (
    <div style={{ marginBottom: "20px" }}>
      <Chart
        chartType="LineChart"
        width="100%"
        height="250px"
        data={chartData}
        options={{
          hAxis: {
            format: "#", // Use 'decimal' format to display integers without commas
          },
        }}
      />
    </div>
  );
}
