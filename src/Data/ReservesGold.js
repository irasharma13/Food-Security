
import React, { useEffect, useState } from "react";
import { Chart } from "react-google-charts";
import { useSelector } from "react-redux";

export const data = [
  ["Year", "India", "China", "US"],
  [1960,674536630.92578,0,19664164000],
  [1961,666357094.860707,0,18825530000],
  [1962,512791844.004694,0,17252463900],
  [1963,607862500.361696,0,16878648000],
  [1964,499145125.789702,0,16725493600],
  [1965,600850886.234668,0,15498323200],
  [1966,609694584.532287,0,14953446600],
  [1967,663764119.793592,0,14898992000],
  [1968,730352744.867941,0,17857180000],
  [1969,927764119.793592,0,17031416000],
  [1970,1023173271.49678,0,15236515800],
  [1971,1245821898.02245,0,14831073226.4574],
  [1972,1367601418.5857,0,20573775352.1224],
  [1973,1629325093.4044,0,33703588954.2107],
  [1974,2324650346.59874,0,55700252549.1293],
  [1975,2064427967.54988,0,43154974089.341],
  [1976,3728750637.4451,0,44162131646.1166],
  [1977,6085439869.41109,4456360000,53374370832.8974],
  [1978,8316115827.7223,4449800000,69447964987.8909],
  [1979,11815414018.5725,8707600000,143259225732.736],
  [1980,12009788667.4367,10090779859.0455,171412607203.354],
  [1981,8108837891.29932,10106339042.8511,123907234985.741],
  [1982,8241561692.94602,17151500473.3587,143444661762.222],
  [1983,8215732398.97451,19831702777.5854,123110064423.481],
  [1984,8535944481.20133,21281443729.6592,104855936881.377],
  [1985,9493102974.01812,16881047188.0492,117981972231.986],
  [1986,10480102587.5579,16417429180.4582,139883920728.389],
  [1987,11511740598.8136,22453016927.8895,161738455237.867],
  [1988,9185839446.54077,23751513805.8296,144176820283.572],
  [1989,8048455918.16026,23052566323.2318,168583563269.377],
  [1990,5637446363.83185,34475661158.6121,173093564607.844],
  [1991,7615987475.11472,48165019103.1198,159272850288.003],
  [1992,9538786025.16566,24852636915.1072,147525874735.105],
  [1993,14674627089.9414,27348104116.5518,164620171357.293],
  [1994,24220928468.8194,57781337884.3961,163590579764.938],
  [1995,22864636916.1009,80288427869.5104,175995426883.436],
  [1996,24889364657.4122,111728900039.4,160660160546.204],
  [1997,28385372945.8609,146448007873.157,134836033327.141],
  [1998,30646563663.4809,152842955596.126,146006089507.341],
  [1999,36005295926.4425,161414049491.999,136450101867.481],
  [2000,41059061574.6632,171763098225.843,128399516602.723],
  [2001,49050841138.7213,220056777617.14,130076677027.985],
  [2002,71607865093.6969,297739475705.212,157762914914.241],
  [2003,103737208055.967,416199411548.593,184024332193.35],
  [2004,131631143125.845,622948544349.601,190464790633.305],
  [2005,137824828256.285,831409619695.566,188259141662.468],
  [2006,178049790065.97,1080755682869.9,221088725058.691],
  [2007,276578100117.408,1546364660543.37,277548941768.855],
  [2008,257422725614.879,1966037431070.11,294045673779.627],
  [2009,284682887897.586,2452899062067.79,404098925258.353],
  [2010,300480168786.346,2913711711315.37,488928508742.44],
  [2011,298739463090.872,3254674063563.49,537267041107.474],
  [2012,300425517446.546,3387512973773.81,574268084132.447],
  [2013,298092478740.581,3880368265252.93,448508920737.711],
  [2014,325081035127.891,3900039302991.09,434416188744.625],
  [2015,353319061013.224,3405253363888.14,383728497570.133],
  [2016,361694321972.036,3097658421378.4,405942428719.749],
  [2017,412613792019.924,3235681607213.04,451285263406.24],
  [2018,399167159226.682,3168216331199.09,449907088828.546],
  [2019,463469902152.507,3222894578036.36,516700583371.247],
  [2020,590227359928.896,3357240875433.72,628369715338.322],
  [2021,638484779930.836,3427931394628.85,716152260973.711],
  [2022,567298153917.14,3306839412813.78,706644215998.894],    
];

export function ReservesGold(props) {
  const [chartData, setchartData] = useState([]);
  const range = useSelector((state) => state.countryRange.range);
  const country = useSelector((state) => state.countryRange.country);
  const filterData = () => {
    let filteredData = [["year", country]];
    let col = 0;
    if (country == "USA") {
      col = 3;
    } else if (country == "INDIA") {
      col = 1;
    } else if (country == "China") {
      col = 2;
    } else {
      setchartData(data);
      return;
    }
    let startYear = range[0];
    let endYear = range[1];
    for (let i = 1; i < data.length; i++) {
      let currYear = data[i][0];
      if (currYear <= endYear && currYear >= startYear) {
        filteredData.push([currYear, data[i][col]]);
      }
    }
    setchartData(filteredData);
  };

  useEffect(() => {
    console.log(range, country);
    filterData();
  }, [range, country]);

  return (
    <div style={{ marginBottom: "20px" }}>
      <Chart
        chartType="LineChart"
        width="100%"
        height="250px"
        data={chartData}
        options={{
          hAxis: {
            format: "#", // Use 'decimal' format to display integers without commas
          },
        }}
      />
    </div>
  );
}
