
import React, { useEffect, useState } from "react";
import { Chart } from "react-google-charts";
import { useSelector } from "react-redux";

export const data = [
  ["Year", "India", "China", "US"],
  [1960,0,0,0],
  [1961,0,0,0],
  [1962,0,0,0],
  [1963,0,0,0],
  [1964,0,0,0],
  [1965,0,0,0],
  [1966,0,0,0],
  [1967,0,0,0],
  [1968,0,0,0],
  [1969,0,0,0],
  [1970,0,0,0],
  [1971,0,0,0],
  [1972,0,0,0],
  [1973,0,0,0],
  [1974,0,0,0],
  [1975,13.8880238001686,0,0],
  [1976,16.8863022716248,0,0],
  [1977,14.5944441988572,0,0],
  [1978,14.2162364258735,0,0],
  [1979,10.695918182962,0,0],
  [1980,9.27104075857953,0,0],
  [1981,10.100158204858,0,0],
  [1982,10.9856459244786,7.58958385984067,0],
  [1983,13.505419317598,9.76105095896503,0],
  [1984,14.6672021030753,6.61442691129369,0],
  [1985,19.1470509981572,6.36970960224014,0],
  [1986,28.4831084438931,8.34258792034677,0],
  [1987,27.8445018083083,7.99967191272075,0],
  [1988,26.6977098412376,8.5067382015998,0],
  [1989,26.5236308066954,10.1016352161233,0],
  [1990,27.1649347717067,10.61087782865,0],
  [1991,26.7618728355772,10.8471167581194,0],
  [1992,25.4384275810079,9.38499580272947,0],
  [1993,25.1974013511108,10.2438423904561,0],
  [1994,29.7222092147053,8.13551420499848,0],
  [1995,30.5446476375183,8.98416222815204,0],
  [1996,25.4117956076489,8.32007878237502,0],
  [1997,24.5403661403625,11.5007594228784,0],
  [1998,22.4906010281906,8.70614978223589,0],
  [1999,15.5898678884257,9.17518947476203,0],
  [2000,15.3785252750562,7.10365634221398,0],
  [2001,12.7873723803292,6.09499146981097,0],
  [2002,16.0936630679547,5.08765834133732,0],
  [2003,20.4370578603135,3.02695463642206,0],
  [2004,7.72064797144166,1.27949109885197,0],
  [2005,9.68673187832864,1.09628764086999,0],
  [2006,3.04097340030301,0.850106942984024,0],
  [2007,4.08674197262603,0.645147457761912,0],
  [2008,4.67088966817266,0.585786185578993,0],
  [2009,2.42993180000253,0.63504326598963,0],
  [2010,1.74480879947485,0.768929630666259,0],
  [2011,1.7610880638326,0.657141959874656,0],
  [2012,1.68235421098899,0.446124159147646,0],
  [2013,2.26107481576509,0.480039992306932,0],
  [2014,2.70826109311248,0.544490697183815,0],
  [2015,3.08580557711602,1.34005981208142,0],
  [2016,5.06404418855236,0.763737304766045,0],
  [2017,2.78303096184464,0.691453049447116,0],
  [2018,4.23263826104399,0.734223632345877,0],
  [2019,2.90798440721341,1.01216063370734,0],
  [2020,5.12869235934722,1.09618727708858,0],
  [2021,2.43271676647142,1.30211820696171,0],
  [2022,0,0,0],  
];

export function DService(props) {
  const [chartData, setchartData] = useState([]);
  const range = useSelector((state) => state.countryRange.range);
  const country = useSelector((state) => state.countryRange.country);
  const filterData = () => {
    let filteredData = [["year", country]];
    let col = 0;
    if (country == "USA") {
      col = 3;
    } else if (country == "INDIA") {
      col = 1;
    } else if (country == "China") {
      col = 2;
    } else {
      setchartData(data);
      return;
    }
    let startYear = range[0];
    let endYear = range[1];
    for (let i = 1; i < data.length; i++) {
      let currYear = data[i][0];
      if (currYear <= endYear && currYear >= startYear) {
        filteredData.push([currYear, data[i][col]]);
      }
    }
    setchartData(filteredData);
  };

  useEffect(() => {
    console.log(range, country);
    filterData();
  }, [range, country]);

  return (
    <div style={{ marginBottom: "20px" }}>
      <Chart
        chartType="LineChart"
        width="100%"
        height="250px"
        data={chartData}
        options={{
          hAxis: {
            format: "#", // Use 'decimal' format to display integers without commas
          },
        }}
      />
    </div>
  );
}
